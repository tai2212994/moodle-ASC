{"version":3,"sources":["../src/clearchoice.js"],"names":["define","$","CustomEvents","SELECTORS","CHOICE_ELEMENT","CLEAR_CHOICE_ELEMENT","checkClearChoiceRadio","clearChoiceContainer","find","prop","getClearChoiceElement","root","fieldPrefix","hideClearChoiceOption","addClass","showClearChoiceOption","removeClass","registerEventListeners","on","events","activate","e","data","originalEvent","preventDefault","init"],"mappings":"AAuBAA,OAAM,iCAAC,CAAC,QAAD,CAAW,gCAAX,CAAD,CAA+C,SAASC,CAAT,CAAYC,CAAZ,CAA0B,IAEvEC,CAAAA,CAAS,CAAG,CACZC,cAAc,CAAE,eADJ,CAEZC,oBAAoB,CAAE,8CAFV,CAF2D,CAYvEC,CAAqB,CAAG,SAASC,CAAT,CAA+B,CACvDA,CAAoB,CAACC,IAArB,CAA0B,uBAA1B,EAAiDC,IAAjD,CAAsD,SAAtD,IACH,CAd0E,CAuBvEC,CAAqB,CAAG,SAASC,CAAT,CAAeC,CAAf,CAA4B,CACpD,MAAOD,CAAAA,CAAI,CAACH,IAAL,CAAU,YAAaI,CAAb,CAA2B,KAArC,CACV,CAzB0E,CAgCvEC,CAAqB,CAAG,SAASN,CAAT,CAA+B,CACvDA,CAAoB,CAACO,QAArB,CAA8B,SAA9B,CACH,CAlC0E,CAyCvEC,CAAqB,CAAG,SAASR,CAAT,CAA+B,CACvDA,CAAoB,CAACS,WAArB,CAAiC,SAAjC,CACH,CA3C0E,CAmDvEC,CAAsB,CAAG,SAASN,CAAT,CAAeC,CAAf,CAA4B,CACrD,GAAIL,CAAAA,CAAoB,CAAGG,CAAqB,CAACC,CAAD,CAAOC,CAAP,CAAhD,CAEAD,CAAI,CAACO,EAAL,CAAQhB,CAAY,CAACiB,MAAb,CAAoBC,QAA5B,CAAsCjB,CAAS,CAACE,oBAAhD,CAAsE,SAASgB,CAAT,CAAYC,CAAZ,CAAkB,CAGhFhB,CAAqB,CAACC,CAAD,CAArB,CAEAM,CAAqB,CAACN,CAAD,CAArB,CAEAe,CAAI,CAACC,aAAL,CAAmBC,cAAnB,EACP,CARD,EAUAb,CAAI,CAACO,EAAL,CAAQhB,CAAY,CAACiB,MAAb,CAAoBC,QAA5B,CAAsCjB,CAAS,CAACC,cAAhD,CAAgE,UAAW,CAEvEW,CAAqB,CAACR,CAAD,CACxB,CAHD,CAIH,CApE0E,CAiF3E,MAAO,CACHkB,IAAI,CANG,QAAPA,CAAAA,IAAO,CAASd,CAAT,CAAeC,CAAf,CAA4B,CACnCD,CAAI,CAAGV,CAAC,CAAC,IAAMU,CAAP,CAAR,CACAM,CAAsB,CAACN,CAAD,CAAOC,CAAP,CACzB,CAEM,CAGV,CApFK,CAAN","sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Manages 'Clear my choice' functionality actions.\n *\n * @module     qtype_multichoice/clearchoice\n * @copyright  2019 Simey Lameze <simey@moodle.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n * @since      3.7\n */\ndefine(['jquery', 'core/custom_interaction_events'], function($, CustomEvents) {\n\n    var SELECTORS = {\n        CHOICE_ELEMENT: '.answer input',\n        CLEAR_CHOICE_ELEMENT: 'div[class=\"qtype_multichoice_clearchoice\"]'\n    };\n\n    /**\n     * Mark clear choice radio as checked.\n     *\n     * @param {Object} clearChoiceContainer The clear choice option container.\n     */\n    var checkClearChoiceRadio = function(clearChoiceContainer) {\n        clearChoiceContainer.find('input[type=\"radio\"]').prop('checked', true);\n    };\n\n    /**\n     * Get the clear choice div container.\n     *\n     * @param {Object} root The question root element.\n     * @param {string} fieldPrefix The question outer div prefix.\n     * @returns {Object} The clear choice div container.\n     */\n    var getClearChoiceElement = function(root, fieldPrefix) {\n        return root.find('div[id=\"' + fieldPrefix + '\"]');\n    };\n\n    /**\n     * Hide clear choice option.\n     *\n     * @param {Object} clearChoiceContainer The clear choice option container.\n     */\n    var hideClearChoiceOption = function(clearChoiceContainer) {\n        clearChoiceContainer.addClass('sr-only');\n    };\n\n    /**\n     * Shows clear choice option.\n     *\n     * @param {Object} clearChoiceContainer The clear choice option container.\n     */\n    var showClearChoiceOption = function(clearChoiceContainer) {\n        clearChoiceContainer.removeClass('sr-only');\n    };\n\n    /**\n     * Register event listeners for the clear choice module.\n     *\n     * @param {Object} root The question outer div prefix.\n     * @param {string} fieldPrefix The \"Clear choice\" div prefix.\n     */\n    var registerEventListeners = function(root, fieldPrefix) {\n        var clearChoiceContainer = getClearChoiceElement(root, fieldPrefix);\n\n        root.on(CustomEvents.events.activate, SELECTORS.CLEAR_CHOICE_ELEMENT, function(e, data) {\n\n                // Mark the clear choice radio element as checked.\n                checkClearChoiceRadio(clearChoiceContainer);\n                // Now that the hidden radio has been checked, hide the clear choice option.\n                hideClearChoiceOption(clearChoiceContainer);\n\n                data.originalEvent.preventDefault();\n        });\n\n        root.on(CustomEvents.events.activate, SELECTORS.CHOICE_ELEMENT, function() {\n            // If the event has been triggered by any other choice, show the clear choice option.\n            showClearChoiceOption(clearChoiceContainer);\n        });\n    };\n\n    /**\n     * Initialise clear choice module.\n\n     * @param {string} root The question outer div prefix.\n     * @param {string} fieldPrefix The \"Clear choice\" div prefix.\n     */\n    var init = function(root, fieldPrefix) {\n        root = $('#' + root);\n        registerEventListeners(root, fieldPrefix);\n    };\n\n    return {\n        init: init\n    };\n});\n"],"file":"clearchoice.min.js"}